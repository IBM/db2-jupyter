
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>Db2 Magic Command Options - Db2 Magic Commands</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#db2-magic-options" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Db2 Magic Commands" class="md-header__button md-logo" aria-label="Db2 Magic Commands" data-md-component="logo">
      
  <img src="../img/IBM_logo®_rev_RGB.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Db2 Magic Commands
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Db2 Magic Command Options
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Db2 Magic Commands" class="md-nav__button md-logo" aria-label="Db2 Magic Commands" data-md-component="logo">
      
  <img src="../img/IBM_logo®_rev_RGB.png" alt="logo">

    </a>
    Db2 Magic Commands
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../connect/" class="md-nav__link">
        Getting Connected
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../linevscell/" class="md-nav__link">
        SQL Magic Commands
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../sql_options/" class="md-nav__link">
        SQL Options
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Db2 Magic Command Options
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Db2 Magic Command Options
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#display-format" class="md-nav__link">
    Display Format
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maximum-number-of-rows" class="md-nav__link">
    Maximum Number of Rows
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maximum-grid-size" class="md-nav__link">
    Maximum Grid Size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread-parallelism" class="md-nav__link">
    Thread Parallelism
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../plotting/" class="md-nav__link">
        Plotting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../variables/" class="md-nav__link">
        Variables
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../resultsets/" class="md-nav__link">
        Result Sets
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../stored_procedures/" class="md-nav__link">
        Stored Procedures
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../developmentsql/" class="md-nav__link">
        Development SQL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../pandasdb2/" class="md-nav__link">
        Pandas to Db2
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../parallel/" class="md-nav__link">
        Parallel SQL
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../macros/" class="md-nav__link">
        Macros
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../extramacros/" class="md-nav__link">
        Predefined Macros
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        Support
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#display-format" class="md-nav__link">
    Display Format
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maximum-number-of-rows" class="md-nav__link">
    Maximum Number of Rows
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maximum-grid-size" class="md-nav__link">
    Maximum Grid Size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#thread-parallelism" class="md-nav__link">
    Thread Parallelism
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="db2-magic-options">Db2 Magic Options</h1>
<p>The previous section discussed options that are specific for <code>%sql</code> commands and are only valid during the execution of that statement. There are options available that impact the execution of the <code>%sql</code> statements and are discussed below.</p>
<p>There are four options that can be set with the <code>%sql</code> command. These options are shown below with the default value shown in parentheses.</p>
<ul>
<li>
<p>DISPLAY PANDAS | GRID (PANDAS)</p>
<p>Display the results as a PANDAS dataframe (default) or as a scrollable GRID.
<p></p>
</li>
<li>
<p>MAXROWS n (10)</p>
<p>The maximum number of rows that will be displayed before summary information is shown. If the answer set is less than this number of rows, it will be completely shown on the screen. If the answer set is larger than this amount, only the first 5 rows and last 5 rows of the answer set will be displayed. If you want to display a very large answer set, you may want to consider using the grid option <code>-grid</code> to display the results in a scrollable table. If you really want to show all results, then setting <code>MAXROWS</code> to <code>-1</code> will return all output.
<p></p>
</li>
<li>
<p>MAXGRID n (5)</p>
<p>The maximum size of a grid display. When displaying a result set in a grid <code>-grid</code>, the default size of the display window is 5 rows. You can set this to a larger size so that more rows are shown on the screen. Note that the minimum size always remains at <code>5</code> which means that if the system is unable to display your maximum row size it will reduce the table display until it fits.
<p></p>
</li>
<li>
<p>LIST
    Display the current settings.
    <p></p>
</li>
</ul>
<p>To set an option use either of the following commands:</p>
<pre><code>%sql SET OPTION value
%sql OPTION setting value [setting value...]
</code></pre>
<p>The <code>OPTION</code> command allows multiple options to be set with one command. When either command is executed, the current settings are displayed.</p>
<p>For instance, to set the maximum display rows to 100:</p>
<pre><code>%sql SET MAXROWS 100
</code></pre>
<h2 id="display-format">Display Format</h2>
<p>The default display format for any data returned is Pandas. This example illustrates the standard output returned from a <code>SELECT</code> statement:</p>
<p><img alt="Pandas" src="../img/displaypandas.png" /></p>
<p>The Pandas output format will sometimes truncate the output (as shown above). You can adjust the number of rows that can be displayed from an answer set using the <code>MAXROWS</code> setting discussed below. This standard output may be sufficient for your requirements if you are only returning small answer sets (less than 100 rows to display). Otherwise, you may consider using the <code>-grid</code> option. The same answer set using a <code>-grid</code> display is shown below.</p>
<p><img alt="Pandas" src="../img/displaygrid.png" /></p>
<p>The advantage of the <code>-grid</code> option is that the entire answer set can be retrieved and reviewed in the scrollable window. This is not possible when using Pandas output. It is also not possible to display all rows in the Pandas dataframe due to memory limitations when writing to a Jupyter notebook cell. The grid control removes these restrictions by allowing the entire answer set to be viewed in a grid format.</p>
<p>The <code>DISPLAY</code> option is used to set the default display format of an SQL answer set. The default setting is <code>PANDAS</code> which is the standard output format of a Pandas dataframe. To change the default display format use the <code>SET</code> command with the <code>DISPLAY</code> option:</p>
<pre><code>%sql SET DISPLAY [PANDAS | GRID]
</code></pre>
<p>Setting this value to <code>GRID</code> will result in all answer sets being displayed using the interactive grid format.</p>
<pre><code>%sql SET DISPLAY GRID
</code></pre>
<p>The display format is kept with the connection information. If you start up another session using the same connection information, the last display format will be used.</p>
<h2 id="maximum-number-of-rows">Maximum Number of Rows</h2>
<p>The default number of rows that are displayed when using a Pandas dataframe is 10. An answer set will always display the first 5 rows and the last 5 rows of an answer set in a Jupyter notebook:</p>
<p><img alt="Maxrows" src="../img/maxrows1.png" /></p>
<p>The missing rows are marked with a <code>...</code> in-between the top and bottom sections of the answer set. To increase the <strong>default</strong> display size, you can change the <code>MAXROWS</code> setting. The rows that are displayed depends on how many can fit within the <code>MAXROWS</code> settings. The rules are as follows:</p>
<ul>
<li>If the number of rows is less than or equal to <code>MAXROWS</code>, then all rows will be displayed.</li>
<li>If the number of rows is greater than <code>MAXROWS</code> then only the top and bottom 5 rows are displayed.</li>
<li>If <code>MAXROWS</code> is too big for a Jupyter notebook cell, the cell will contain scroll bars allowing you to scroll through the results.</li>
</ul>
<p>The maximum value for <code>MAXROWS</code> is <code>100</code> to avoid memory issues with Jupyter notebooks. </p>
<p>For the following examples, the <code>MAXROWS</code> setting is set to <code>5</code>.</p>
<pre><code>%sql SET MAXROWS 5
</code></pre>
<p>The first example demonstrates when exactly 5 rows are returned from the <code>EMPLOYEE</code> table.</p>
<p><img alt="Maxrows" src="../img/maxrows5.png" /></p>
<p>The next example demonstrates how the answer set is split when the number of rows exceeds 5.</p>
<p><img alt="Maxrows" src="../img/maxrows10.png" /></p>
<p>If maximum value of <code>MAXROWS</code> is 100. As many rows possible will be displayed in the notebook. If the number of rows is too large, the cell will contain scrollbars so that you can see all rows that are returned.</p>
<p><img alt="Maxrows" src="../img/maxrows100.png" /></p>
<p>If you want to scroll through large answer sets, you should consider using the <code>-grid</code> flag or set the <code>DISPLAY</code> option.</p>
<h2 id="maximum-grid-size">Maximum Grid Size</h2>
<p>The grid control displays approximately 5 lines of data in a Jupyter notebook cell. The <code>MAXGRID</code> option can be used to change the number of rows that the grid control will display in a Jupyter notebook cell. The entire answer set can be reviewed using the scroll bars on the right side and bottom of the control.</p>
<p>The following is the default view of the grid control.</p>
<p><img alt="Maxrows" src="../img/gridemployee.png" /></p>
<p>To change the number of rows displayed, use the <code>MAXGRID</code> option:</p>
<pre><code>%sql SET MAXGRID 10
</code></pre>
<p>The answer set will now display a minimum of 10 rows in the grid.</p>
<p><img alt="Maxrows" src="../img/gridemployee10.png" /></p>
<p>Note that the <code>MAXGRID</code> option does not affect the number of rows that are returned in an answer set.</p>
<h2 id="thread-parallelism">Thread Parallelism</h2>
<p>The Db2 magic commands have the ability to split a SQL statement into multiple threads to improve the time it takes to retrieve answer sets. This feature does not make Db2 more efficient - it provides a way to increase the utilization of Db2 and pipeline SQL statements so that less time is spent waiting for data to be retrieved. The section on parallelism explores this feature in more detail.</p>
<p>The <code>THREADS</code> option tells Db2 the maximum of threads that it will be allowed to use when running the SQL. The SQL will be split (based on some range or key) and multithreaded into Db2. The <code>THREADS</code> value can be anything from zero (standard SQL call) to 12. The highest performance was found to occur when using 6 to 8 threads, but this will be entirely dependent on the SQL workload. </p>
<p>To set the number of threads use the following syntax:</p>
<pre><code>%sql SET THREADS 0-12
</code></pre>
<p>The <code>THREADS</code> option does not apply to standard SQL statements. This option will only be used when the <code>USING x SELECT...</code> syntax is detected in a <code>%sql</code> or <code>%%sql</code> block.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../sql_options/" class="md-footer__link md-footer__link--prev" aria-label="Previous: SQL Options" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              SQL Options
            </div>
          </div>
        </a>
      
      
        
        <a href="../plotting/" class="md-footer__link md-footer__link--next" aria-label="Next: Plotting" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Plotting
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>